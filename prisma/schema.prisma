generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Customer {
    customerID Int       @id @default(autoincrement())
    name       String
    phoneNo    String
    address    String
    DOB        DateTime
    Review     Review[]
    Booking    Booking[]
    Room       Room[]
}

model Booking {
    bookingID    Int      @id @default(autoincrement())
    checkinDate  DateTime
    checkoutDate DateTime
    billNo       Int
    userNo       Int
    roomNo       Int
    room         Room     @relation(fields: [roomNo], references: [roomNo])
    bill         Bill     @relation(fields: [billNo], references: [billID])
    user         Customer @relation(fields: [userNo], references: [customerID])
}

model Bill {
    billID      Int       @id @default(autoincrement())
    amount      Int
    paymentDate DateTime
    Booking     Booking[]
}

model Hotel {
    hotelID  Int    @id @default(autoincrement())
    name     String
    address  String
    password String
    Room     Room[]
}

model Room {
    roomNo      Int       @id @default(autoincrement())
    description String
    price       Int
    type        String
    booked      Boolean
    bookedBy    Int?
    hotelNo     Int
    hotel       Hotel     @relation(fields: [hotelNo], references: [hotelID])
    Review      Review[]
    Booking     Booking[]
    user        Customer? @relation(fields: [bookedBy], references: [customerID])
}

model Review {
    reviewID    Int      @id @default(autoincrement())
    review      Int
    description String
    userNo      Int
    roomNo      Int
    user        Customer @relation(fields: [userNo], references: [customerID])
    room        Room     @relation(fields: [roomNo], references: [roomNo])
}
